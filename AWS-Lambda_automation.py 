import json
import boto3

# Specify the AWS region where the EC2 instances are running
region = 'us-east-1'

# List of EC2 Instance IDs to stop
instances = ['i-0c1a727300375b312', 'i-05c2b6ff0d9634879', 'i-0bb4e950eb0d77055']

# Initialize EC2 client
ec2 = boto3.client('ec2', region_name=region)

def lambda_handler(event, context):
    try:
        # Attempt to stop the specified EC2 instances
        ec2.stop_instances(InstanceIds=instances)
        print(f'Successfully stopped instances: {instances}')
    except Exception as e:
        # Handle any errors that occur
        print(f'Error stopping instances: {str(e)}')
        return {
            'statusCode': 500,
            'body': json.dumps(f'Error stopping instances: {str(e)}')
        }
    
    return {
        'statusCode': 200,
        'body': json.dumps(f'Successfully stopped instances: {instances}')
    }

    
